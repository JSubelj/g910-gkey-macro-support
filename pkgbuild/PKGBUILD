# Maintainer: Jan Subelj <jan dot subelj010 at gmail dot com>
# Contributor: Jan Subelj <jan dot subelj010 at gmail dot com>
pkgname=g910-gkeys-git
_appname=g910-gkeys
_gitname=g910-gkey-macro-support
pkgver=0.4.0
pkgrel=1
pkgdesc='GKey support for Logitech G910 Keyboard on GNU/Linux'
url='https://github.com/JSubelj/g910-gkey-macro-support'
arch=('any')
license=('GPL3')
depends=('python-pyusb' 'python-uinput')
makedepends=('git' 'systemd')
#source=('git://github.com/JSubelj/g910-gkey-macro-support.git#branch=development')
source=('git://github.com/JSubelj/g910-gkey-macro-support.git')
install=${pkgname}.install
backup=("{$HOME}/.config/g910-gkeys/config.json" "{$HOME}/.config/systemd/user/g910-gkeys.service" "etc/udev/rules.d/60-g910-gkeys.rules" "etc/modules-load.d/uinput-g910-gkeys.conf")
md5sums=('SKIP')

build() {
    cd ${srcdir}/${_gitname}
    python -m build
}

package() {
    cd ${srcdir}/${_gitname}
    pip install dist/${_appname}-${pkgver}.tar.gz

    install -Dm 644 -t "$pkgdir"/etc/udev/rules.d/60-g910-gkeys.rules etc/60-g910-gkeys.rules
    install -Dm 644 -t "$pkgdir"/etc/modules-load.d/uinput-g910-gkeys.conf etc/uinput-g910-gkeys.conf
}
